# grabook

`grabook` (grab + book) - скрипт, который позволит сохранить себе книгу, которую можно читать в браузере, но нельзя скачать.

Существуют такие сервисы, где читать книги можно только через их web-reader. Но не всегда есть интернет для этого. Этот скрипт пригодится тем, кто хочет читать такие книги оффлайн в формате pdf.

# Зависимости

Для работы необходим `Python3`. Также необходимы модули `PyQt5` и `pyautogui`:

``` bash
> python -m pip install --upgrade pip

> pip3 install PyQt5

> pip3 install pyautogui
```

Для `Linux` также необходимы `python3-tk` и `scrot`. Для `Arch` установка компонентов выглядит следующим образом:

``` bash
> sudo pacman -S tk

> yay scrot
```

# Использование

![](./imgsrc/pres.gif)

Запуск:

``` bash
> python grabook.py
```

В поле `next` записать клавишу(и), которую(ые) необходимо нажимать после сохранения каждой страницы. Если необходимо несколько клавиш, то запишите их через пробел. Вот клавиши, которые вам могут понадобиться:

- `m_l` - левая кнопка мыши, `m_r` - правая кнопка мыши.

- `space` и `tab`

- `pageup` и `pagedown`

- `left`, `right`, `up`, `down` - стрелочки влево, вправо, вверх и вниз соответственно

- Любая клавиша с буквой английского алфавита

- Подробнее [здесь](https://pyautogui.readthedocs.io/en/latest/keyboard.html) + все доступные клавиши [здесь](https://i.imgur.com/4j2kWMl.png).

В поле `nextKeyDelay(ms)` записать задержку в милисекундах перед сохранинеим следующей страницы. Если в получившимся `pdf-файле` есть какие-то артефакты, то попробуйте увеличить число `nextKeyDelay(ms)`.

Например, пусть поле `next`="m_l right space", а поле `nextKeyDelay(ms)`=500. Тогда будут поочерёдно нажиматься `левая кнопка мыши, стрелочка влево и пробел` каждые `полсекунды`.

В поле `saveTo` записать путь до выходного `pdf-файла`. Или просто название `pdf-файла`, тогда он сохранится в текущей директории.

В поле `pagesNum` вписать количество сохраняемых страниц в книге.

После заполнения полей нажмите кнопку `set LU coord` и навидите курсор на верхний левый угол страницы, после сохранения координат кнопка перекрасится в зелёный цвет. Сделайте тоже самое с `set RD coord`, но теперь нужен нижний правый угол страницы. На настройку каждого угла выделяется `delay` секунд. Вы можете выставить это значение в поле `Set delay`. 

Нажмите кнопку `Start`.